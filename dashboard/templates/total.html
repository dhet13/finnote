{% extends "dashboard/base.html" %}
{% load static %}

{% block title %}총 자산 현황{% endblock %}

{% block extra_css %}
<!-- CSS는 base.html에서 로드됨 -->
{% endblock %}

{% block content %}

<!-- 카드뷰 헤더와 기간 선택 버튼 (일간/주간) -->
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 32px; margin-bottom: 16px;">
    <div></div> <!-- 왼쪽 빈 공간 -->
    <div class="card-period-buttons">
        <button class="card-period-btn active" data-card-period="daily">일간</button>
        <button class="card-period-btn" data-card-period="weekly">주간</button>
    </div>
</div>

<!-- 통계 카드들 -->
<div class="stats-row" style="display: flex; gap: 2px; justify-content: space-between; margin-bottom: 20px; max-width: 560px; width: 100%;">
    <!-- 총 투자 자산 카드 -->
    <div class="stat-card" style="background: #f7f9fa; padding: 4px; border-radius: 4px; min-width: 0; overflow: hidden; max-width: 180px; width: 100%; box-sizing: border-box;">
        <div class="stat-card-title" style="font-size: 8px; font-weight: 500; color: #536471; margin-bottom: 4px;">총 투자 자산</div>
        <div class="stat-value" id="total-asset-value" style="font-size: 12px; font-weight: 700; color: #0f1419; margin-bottom: 2px; line-height: 1;">117.34k</div>
        <div class="stat-change" id="total-asset-change" style="font-size: 9px; font-weight: 500; color: #17bf63; background: rgba(23, 191, 99, 0.1); padding: 1px 4px; border-radius: 2px; display: inline-block; margin-top: 4px;">+2.5%</div>
        <div class="mini-chart" style="margin-top: 8px; height: 25px;">
            <canvas id="totalBarChart" width="100" height="25"></canvas>
        </div>
    </div>

    <!-- 일일 손익 카드 -->
    <div class="stat-card" style="background: #f7f9fa; padding: 4px; border-radius: 4px; min-width: 0; overflow: hidden; max-width: 180px; width: 100%; box-sizing: border-box;">
        <div class="stat-card-title" style="font-size: 8px; font-weight: 500; color: #536471; margin-bottom: 4px;">일일 손익</div>
        <div class="stat-value" id="daily-pnl-value" style="font-size: 12px; font-weight: 700; color: #0f1419; margin-bottom: 2px; line-height: 1;">-1.23k</div>
        <div class="stat-change" id="daily-pnl-change" style="font-size: 9px; font-weight: 500; color: #f91880; background: rgba(249, 24, 128, 0.1); padding: 1px 4px; border-radius: 2px; display: inline-block; margin-top: 4px;">-1.2%</div>
        <div class="mini-chart" style="margin-top: 8px; height: 25px;">
            <canvas id="dayLineChart" width="100" height="25"></canvas>
        </div>
    </div>

    <!-- 월 손익 카드 -->
    <div class="stat-card" style="background: #f7f9fa; padding: 4px; border-radius: 4px; min-width: 0; overflow: hidden; max-width: 180px; width: 100%; box-sizing: border-box;">
        <div class="stat-card-title" style="font-size: 8px; font-weight: 500; color: #536471; margin-bottom: 4px;">월 손익</div>
        <div class="stat-value" id="monthly-pnl-value" style="font-size: 12px; font-weight: 700; color: #0f1419; margin-bottom: 2px; line-height: 1;">+5.67k</div>
        <div class="stat-change" id="monthly-pnl-change" style="font-size: 9px; font-weight: 500; color: #17bf63; background: rgba(23, 191, 99, 0.1); padding: 1px 4px; border-radius: 2px; display: inline-block; margin-top: 4px;">+4.8%</div>
        <div class="mini-chart" style="margin-top: 8px; height: 25px;">
            <canvas id="monthAreaChart" width="100" height="25"></canvas>
        </div>
    </div>
</div>

<!-- 총 투자 자산 수익률 섹션 -->
<div style="background: #f7f9fa; padding: 24px; border-radius: 8px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <h3 style="color: #0f1419; font-size: 18px; font-weight: 600;">총 투자 자산 수익률</h3>
        <div style="display: flex; align-items: center; gap: 16px;">
            <!-- 메인 기간 선택 버튼 -->
            <div class="main-period-buttons" style="display: flex; gap: 8px;">
                <button class="main-period-btn active" data-main-period="1D">1D</button>
                <button class="main-period-btn" data-main-period="1W">1W</button>
                <button class="main-period-btn" data-main-period="1M">1M</button>
                <button class="main-period-btn" data-main-period="1Y">1Y</button>
            </div>
            <!-- 기간 범위 선택 -->
            <select class="period-selector" data-period-range="30">
                <option value="30">30일</option>
                <option value="60">60일</option>
                <option value="90">90일</option>
                <option value="180">180일</option>
                <option value="365">365일</option>
            </select>
        </div>
    </div>
    <div style="height: 300px;">
        <canvas id="mainPortfolioChart"></canvas>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<!-- JavaScript는 base.html에서 로드됨 -->
{% endblock %}