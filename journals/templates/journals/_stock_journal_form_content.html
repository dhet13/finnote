{% load static %}
{# Removed outer div.compose-card #}
{# Removed <form id="stock-journal-form" novalidate> #}
    {# Removed {% csrf_token %} #}

    <div class="form-section">
        <h2 class="section-title">ì£¼ì‹ ì„ íƒ</h2> {# Changed h3 to h2 #}
        <div class="input-group-icon">
            <input type="search" id="stock-search" class="form-control" placeholder="ì¢…ëª© ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  ë‹ë³´ê¸°ë¥¼ ëˆ„ë¥´ê±°ë‚˜ Enterë¥¼ ì¹˜ì„¸ìš”.">
            <span id="journal-search-icon" style="position:absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer;">ğŸ”</span>
        </div>
        <div id="stock-search-results" class="search-results-container"></div>
        <div id="selected-stock-card" class="hidden"></div>
    </div>

    <div class="form-section price-grid">
        <div class="input-group">
            <label for="target-price">ëª©í‘œ ê°€ê²©</label>
            <input type="number" id="target-price" name="target_price" class="form-control">
        </div>
        <div class="input-group">
            <label for="target-percent">%</label>
            <input type="number" id="target-percent" class="form-control">
        </div>
        <div class="input-group">
            <label for="stop-price">ì†ì ˆ ê°€ê²©</label>
            <input type="number" id="stop-price" name="stop_price" class="form-control">
        </div>
        <div class="input-group">
            <label for="stop-percent">%</label>
            <input type="number" id="stop-percent" class="form-control">
        </div>
    </div>

    <div class="form-section trade-side-selector">
        <button type="button" class="btn btn-buy" data-side="BUY">ë§¤ìˆ˜</button>
        <button type="button" class="btn btn-sell" data-side="SELL">ë§¤ë„</button>
    </div>

    <div id="holding-summary-card" class="form-section holdings-grid hidden">
        <!-- JS will inject content here -->
    </div>

    <div class="form-section trade-input-grid">
        <div class="input-group">
            <label for="trade-price">ë§¤ìˆ˜ ê¸ˆì•¡(ì›)</label>
            <div class="stepper-input">
                <input type="number" id="trade-price" class="form-control">
                <button type="button" class="stepper-btn stepper-down">-</button>
                <button type="button" class="stepper-btn stepper-up">+</button>
            </div>
        </div>
        <div class="input-group">
            <label for="trade-quantity">ë§¤ìˆ˜ ìˆ˜ëŸ‰</label>
            <div class="stepper-input">
                <input type="number" id="trade-quantity" class="form-control">
                <button type="button" class="stepper-btn stepper-down">-</button>
                <button type="button" class="stepper-btn stepper-up">+</button>
            </div>
        </div>
        <div class="input-group">
            <label for="trade-date">ë§¤ìˆ˜ ë‚ ì§œ</label>
            <input type="date" id="trade-date" class="form-control">
        </div>
    </div>

    <div class="form-section">
        <label for="trade-reason">ë§¤ë§¤ì´ìœ ë¥¼ ì ì–´ì£¼ì„¸ìš”</label>
        <textarea id="trade-reason" name="content" class="form-control" rows="5" placeholder="ë§¤ë§¤ì— ëŒ€í•œ ìƒì„¸í•œ ì´ìœ ë‚˜ ì „ëµì„ ê¸°ë¡í•´ì£¼ì„¸ìš”."></textarea>
    </div>

{# Removed form-actions div and buttons #}
{# Removed </form> #}

<!--
NOTE: The script tag was moved back to the parent templates (_compose_modal.html and compose_page_clean.html) 
to follow best practices. This file should only contain the form structure.
-->