{% extends "base.html" %}

{% block feed %}
<style>
  .detail-container { padding: 20px; max-width: 760px; margin: auto; }
  .header { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; border-bottom: 2px solid #f0f0f0; padding-bottom: 12px; margin-bottom: 16px; }
  .title { margin:0; font-size:1.6rem; color:#111827; }
  .subtitle { margin:4px 0 0 0; color:#6b7280; }
  .back-button { display:inline-flex; align-items:center; gap:8px; padding: 8px 12px; border:1px solid #e5e7eb; border-radius: 8px; text-decoration:none; color:#374151; background:#fff; box-shadow: 0 1px 2px rgba(0,0,0,0.03); }
  .back-button:hover { border-color:#cbd5e1; background:#f8fafc; }

  .section-card { background:#fff; border:1px solid #eee; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 2px 8px rgba(0,0,0,0.03); }
  .section-title { font-size:1.05rem; font-weight:600; color:#111827; margin:0 0 12px 0; }
  .grid { display:grid; grid-template-columns: repeat(2, 1fr); gap:12px; }
  .item { background:#f9fafb; border:1px solid #e5e7eb; border-radius:8px; padding:10px; }
  .label { font-size:0.8rem; color:#6b7280; margin-bottom:4px; }
  .value { font-size:1.05rem; color:#111827; }

  .post { background:#f9fafb; border:1px solid #eee; border-radius:8px; padding:12px; margin-bottom:10px; }
  .post-date { font-size:0.85rem; color:#6b7280; margin-bottom:6px; }
</style>

<div class="detail-container">
  <div class="header">
    <div>
      <h1 class="title">{{ property.building_name }}</h1>
      <p class="subtitle">{{ deal.deal_type }} · {{ deal.contract_date|date:"Y년 m월 d일" }} · {{ property.address_base }}</p>
    </div>
    <a href="{% url 'journals:my_list' %}" class="back-button">&#8592; 목록으로</a>
  </div>

  <div class="section-card">
    <div class="section-title">거래 정보</div>
    <div class="grid">
      <div class="item"><div class="label">거래금액</div><div class="value">{{ deal.amount_main|floatformat:0 }}</div></div>
      <div class="item"><div class="label">보증금</div><div class="value">{{ deal.amount_deposit|floatformat:0 }}</div></div>
      <div class="item"><div class="label">월세</div><div class="value">{{ deal.amount_monthly|floatformat:0 }}</div></div>
      <div class="item"><div class="label">전용면적(m²)</div><div class="value">{{ deal.area_m2|floatformat:2 }}</div></div>
      <div class="item"><div class="label">층</div><div class="value">{{ deal.floor }}</div></div>
      <div class="item"><div class="label">대출금액</div><div class="value">{% if deal.loan_amount %}{{ deal.loan_amount|floatformat:0 }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">대출금리(%)</div><div class="value">{% if deal.loan_rate %}{{ deal.loan_rate|floatformat:2 }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">중개수수료</div><div class="value">{% if deal.fees_broker %}{{ deal.fees_broker|floatformat:0 }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">취득세</div><div class="value">{% if deal.tax_acq %}{{ deal.tax_acq|floatformat:0 }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">등기비</div><div class="value">{% if deal.reg_fee %}{{ deal.reg_fee|floatformat:0 }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">기타비용</div><div class="value">{% if deal.misc_cost %}{{ deal.misc_cost|floatformat:0 }}{% else %}—{% endif %}</div></div>
    </div>
  </div>

  <div class="section-card">
    <div class="section-title">건물 정보</div>
    <div class="grid">
      <div class="item"><div class="label">주소</div><div class="value">{{ property.address_base }}</div></div>
      <div class="item"><div class="label">동</div><div class="value">{{ property.dong }}</div></div>
      <div class="item"><div class="label">건축년도</div><div class="value">{% if property.build_year %}{{ property.build_year }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">전체층수</div><div class="value">{% if property.total_floor %}{{ property.total_floor }}{% else %}—{% endif %}</div></div>
      <div class="item"><div class="label">세대수</div><div class="value">{% if property.total_units %}{{ property.total_units }}{% else %}—{% endif %}</div></div>
    </div>
  </div>

  <div class="section-card">
    <div class="section-title">관련 일지 포스트</div>
    {% for post in posts %}
      <div class="post">
        <div class="post-date">{{ post.created_at|date:"Y-m-d H:i" }}</div>
        <div class="post-content">{{ post.content|default:"(내용 없음)" }}</div>
      </div>
    {% empty %}
      <p>관련 포스트가 없습니다.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}

