{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>finote</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link rel="stylesheet" href="{% static 'tokens.css' %}">
        <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <style>
    body { 
        margin: 0; 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background-color: #ffffff;
        color: #0f1419;
        line-height: 1.4;
    }

    .header-placeholder {
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 1200px;
        height: 60px;
        background-color: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid #eff3f4;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .main-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        min-height: 100vh;
    }

    .left-sidebar-placeholder {
        width: 275px;
        min-width: 275px;
        background-color: #ffffff;
        border-right: 1px solid #eff3f4;
        margin-top: 60px;
        height: calc(100vh - 60px);
        padding: 20px;
    }

    .main-feed {
        width: 600px;
        min-width: 600px;
        max-width: 600px;
        border-right: 1px solid #eff3f4;
        margin-top: 60px;
        background-color: #ffffff;
        min-height: 100vh;
    }

    .right-sidebar {
        width: 325px;
        min-width: 325px;
        padding: 20px;
        margin-top: 60px;
        background-color: #ffffff;
    }

    .nav-menu a,
    .nav-menu a:link,
    .nav-menu a:visited,
    .nav-menu a:hover,
    .nav-menu a:active,
    .nav-menu a:focus {
        text-decoration: none !important;
        color: inherit !important;
        outline: none !important;
        border: none !important;
        display: block;
        width: 100%;
        padding: 8px 12px;
        border-radius: 8px;
        transition: background-color 0.2s;
    }

    .nav-menu a:hover {
        background-color: rgba(29, 155, 240, 0.1);
    }

    #modal-root { 
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background-color: rgba(0,0,0,0.5); 
        display: flex; 
        align-items: center; 
        justify-content: center; 
    }

    #modal-root[hidden] { 
        display: none; 
    }
    </style>
</head>
<body>
    <div class="header-placeholder">
        <div style="display: flex; align-items: center; justify-content: space-between; width: 100%; max-width: 1200px;">
            <div style="font-weight: bold; font-size: 20px;">
                <a href="{% url 'home:home_feed' %}" style="text-decoration: none; color: #0f1419;">Home</a>
            </div>
            <div style="text-align: center;">
                <input type="text" placeholder="Search" style="width: 400px; height: 40px; border-radius: 20px; border: 1px solid #eff3f4; padding: 0 16px;">
            </div>
            <div style="display: flex; align-items: center; gap: 16px;">
                {% if user.is_authenticated %}
                    <a href="{% url 'user_profile:user_profile' %}" style="text-decoration: none; color: #0f1419;">Profile</a>
                    <form action="{% url 'logout' %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" style="background: none; border: none; cursor: pointer; color: #0f1419;">Logout</button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" style="text-decoration: none; color: #0f1419;">Login</a>
                    <a href="{% url 'signup' %}" style="text-decoration: none; color: #0f1419;">Sign Up</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="main-container">
        <aside class="left-sidebar-placeholder">
            {% block left %}
            <!-- Left sidebar content -->
             <div style="font-size: 30px; margin-bottom: 20px;">
                üìù
            </div>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item active">
                        <a href="{% url 'home:home_feed' %}"style="text-decoration: none; color: inherit;">
                            <span class="icon">
                                <img src="{% static 'icon/home.svg' %}" alt="Ìôà">
                            </span>
                            <span class="text">Ìôà</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/dashboard/">
                            <span class="icon">
                                <img src="{% static 'icon/dashboard.svg' %}" alt="ÎåÄÏãúÎ≥¥Îìú"style="text-decoration: none; color: inherit;">
                            </span>
                            <span class="text">ÎåÄÏãú Î≥¥Îìú</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/journals/my-list/">
                            <span class="icon">
                                <img src="{% static 'icon/journal.svg' %}" alt="Îß§Îß§ÏùºÏßÄ"style="text-decoration: none; color: inherit;">
                            </span>
                            <span class="text">Îß§Îß§ ÏùºÏßÄ</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" onclick="alert('Î∂ÅÎßàÌÅ¨ Í∏∞Îä• Ï§ÄÎπÑÏ§ë')">
                            <span class="icon">
                                <img src="{% static 'icon/bookmarks.svg' %}" alt="Î∂ÅÎßàÌÅ¨">
                            </span>
                            <span class="text">Î∂ÅÎßàÌÅ¨</span>
                        </a>
                    </li>
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a href="{% url 'user_profile:profile' my_ID=request.user.my_ID %}">
                            <span class="icon">
                                <img src="{% static 'icon/profile.svg' %}" alt="ÌîÑÎ°úÌïÑ">
                            </span>
                            <span class="text">ÌîÑÎ°úÌïÑ</span>
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a href="{% url 'login' %}">
                            <span class="icon">
                                <img src="{% static 'icon/profile.svg' %}" alt="ÌîÑÎ°úÌïÑ">
                            </span>
                            <span class="text">ÌîÑÎ°úÌïÑ</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
            {% endblock %}
        </aside>

        <main class="main-feed">
            {% block feed %}
            {% endblock %}
        </main>

        <aside class="right-sidebar">
            {% block right %}
            <!-- Right sidebar content -->
            {% endblock %}
        </aside>
    </div>

    <div id="modal-root" hidden></div>

    <script src="{% static 'js/modal.js' %}"></script>
    <script>
    // ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Îî∞Îùº active ÌÅ¥ÎûòÏä§ ÏÑ§Ï†ï
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname;
        const navItems = document.querySelectorAll('.nav-item');
        
        // Î™®Îì† nav-itemÏóêÏÑú active Ï†úÍ±∞
        navItems.forEach(item => item.classList.remove('active'));
        
        // ÌòÑÏû¨ Í≤ΩÎ°úÏóê ÎßûÎäî nav-itemÏóê active Ï∂îÍ∞Ä
        if (currentPath.startsWith('/home/') || currentPath === '/') {
            document.querySelector('.nav-item:nth-child(1)').classList.add('active');
        } else if (currentPath.startsWith('/dashboard/')) {
            document.querySelector('.nav-item:nth-child(2)').classList.add('active');
        } else if (currentPath.startsWith('/journals/')) {
            document.querySelector('.nav-item:nth-child(3)').classList.add('active');
        } else if (currentPath.startsWith('/bookmarks/')) {
                document.querySelector('.nav-item:nth-child(4)').classList.add('active');
        } else if (currentPath.startsWith('/profile/')) {
            document.querySelector('.nav-item:nth-child(5)').classList.add('active');
        }
  });
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
